-- functions
select routine_name
from information_schema.routines
where routine_schema='public'
  and routine_name in ('ingest_order','settings_get_bool');

-- flag
select public.settings_get_bool('global','ingest', false) as ingest_enabled;

-- idempotency index
select indexname
from pg_indexes
where schemaname='public' and indexname='orders_shopify_gid_uidx';

-- views
select table_name
from information_schema.views
where table_schema='public'
  and table_name in ('orders_bannos','orders_flourlane');
